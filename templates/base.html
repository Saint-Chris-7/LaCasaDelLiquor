<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-uWxY/CJNBR+1zjPWmfnSnVxwRheevXITnMqoEIeG1LJrdI0GlVs/9cVSyPYXdcSF" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon-16x16.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon.ico' %}">
    <link rel="manifest" href="{% static 'images/site.webmanifest' %}">
    <script>
      var user = '{{request.user}}'
        function getToken(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
        const cookie = cookies[i].trim();
        // Does this cookie string begin with the name we want?
        if (cookie.substring(0, name.length + 1) === (name + '=')) {
        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
        break;
        }
      }
    }
      return cookieValue;
   }
    const csrftoken = getToken('csrftoken');

    </script>
    <title>LA CASA DEL LIQUOR</title>
</head>
<body>
  <nav>
    <img src="{% static 'images/LCL.jpg' %}" class="nav-bar" alt="...">
    <div class="nav-links">
        <ul>
            <li><a href="{% url 'index' %}">Home</a></li> 
            <li><a href="{% url 'login' %}">Login</a></li>
            <li><a href="{% url 'signup' %}">Signup</a></li>  
        </ul>
    </div>
    <div class="form-inline my-2 my-lg-0">
        <a href="{% url 'cart' %}">
           <img  id="cart-icon" src="{% static 'images/carts.png' %}">
       </a>
       <p id="cart-total">0</p>
   </div>
</nav>
        {% block content %}

        {% endblock %}
    </div>
    <!-- JavaScript Bundle with Popper -->
<script 
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-kQtW33rZJAHjgefvhyyzcGF3C5TFyBQBA13V1RKPf4uH+bwyzQxZ6CmMZHmNBEfJ" crossorigin="anonymous">
</script>
<script type="text/javascript"  src="{% static 'js/cart.js' %}" >  </script>


<script>
  function getCookie(name){
  //split cookie string and get all individal name=value pairs in an array
        var cookieArr = document.cookie.split(";");
        //lloop through the array element
  
        for(var i = 0; i< cookieArr.length; i++){
          var cookiePair = cookieArr[i].split("=");
          /* removing the whitespace at the beginning of the cookie name and comapre
        it with the given string*/
  
          if (name == cookiePair[0].trim()){
            //decode the cookie value and return 
            return decodeURIComponent(cookiePair[i]);
          }
        }
        //return null if not found
        return null;
      }
      var cart = JSON.parse(getCookie('cart'))
  
      if(cart == undefined){
        cart ={}
        console.log('cart was created')
        document.cookie = 'cart'+ JSON.stringify(cart) + ";domain=;path/"
      }
      console.log('Cart:',cart)

</script>
</body>
</html>